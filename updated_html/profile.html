<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
	<!--meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1, maximum-scale=1"/-->
	<meta name="description" content=""/>
	<meta name="keywords" content=""/>
	<meta name="username" content="{{username}}"/>
	<title></title>

	<link href="/favicon.ico" rel="icon"/>
	<link href="/apple-favicon.png" rel="apple-touch-icon"/>
	<link href="css/new_main.css" type="text/css" rel="stylesheet" media="all"/>
	<link href="css/profile.css" type="text/css" rel="stylesheet" media="all"/>
	<script src="/socket.io/socket.io.js"></script>
</head>
<body>
	<div class="header">
		<img class="logo" src="img/logo-small.png">
		<div class="user">
			<span id="username">{{ username }}</span>
			<img class="userpic" src="img/avatar-small.png">
		</div>
		<a id="nav-btn" href="#"></a>
		<div class="nav">
			<a href="#" id="home"><p>Home</p></a>
			<span class="sep"></span>
			<a href="#" id="signout"><p>Sign out</p></a>
		</div>
	</div>

	<div class="section orange profile">
		<div class="wrap1">
			<div class="container">
				<div class="row">
					<div class="col left">
						<h1>Hello, <span>{{ firstname }}</span>!</h1>
						<div class="avatar">
							<div class="pic">
								<img src="img/avatar.png" width="50%" height="50%"/>
							</div>
							<a id="change_pic" href="#">Change icon</a>
						</div>
						<h5 id="username">{{ username }}</h5>
						</br>
						<div class="buttons">
							<a class="btn small yellow" href="#">
								<p>Edit Profile!</p>
							</a>
						</div>
					</div>
					<div class="col right">
						<h3>Current Course</h3>
						<div class="panel">
							<div class="wrap" id="currPanel">
								<div class="line">
									<div class="pic" id="currpic">
										<img src="img/pics/1.jpg"/>
									</div>
									<div class="description" id="currDisc">
										<h5 class="title blue">Sample class</h5>
										<div class="brief">
											Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.
										</div>
										<a class="btn small yellow" href="#">
											<p>Continue</p>
										</a>
									</div>
								</div>
							</div>
						</div>
						<h3>Courses I've Completed</h3>
						<div class="panel">
							<div class="wrap" id="classHist">									
								<div class="line">
									<div class="pic">
										<img src="img/pics/2.jpg"/>
									</div>
									<div class="description">
										<h5 class="title purple">Sample class</h5>
										<div class="brief">
											Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.
										</div>
										<a class="btn small yellow" href="#">
											<p>Restart</p>
										</a>
									</div>
								</div>
								
								<div class="line">
									<div class="pic">
										<img src="img/pics/3.jpg"/>
									</div>
									<div class="description">
										<h5 class="title green">Sample class</h5>
										<div class="brief">
											Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.
										</div>
										<a class="btn small yellow" href="#">
											<p>Restart</p>
										</a>
									</div>
								</div>
							
								<div class="line">
									<div class="pic">
										<img src="img/pics/2.jpg"/>
									</div>
									<div class="description">
										<h5 class="title purple">Sample class</h5>
										<div class="brief">
											Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.
										</div>
										<a class="btn small yellow" href="#">
											<p>Restart</p>
										</a>
									</div>
								</div>
							
								<div class="line">
									<div class="pic">
										<img src="img/pics/3.jpg"/>
									</div>
									<div class="description">
										<h5 class="title green">Sample class</h5>
										<div class="brief">
											Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.
										</div>
										<a class="btn small yellow" href="#">
											<p>Restart</p>
										</a>
									</div>
								</div>
							</div>
						</div>
						<h3>Future Courses</h3>
						<div class="panel disabled">
							<div class="wrap" id="futureClasses">
								<div class="line">
									<div class="pic">
										<img src="img/pics/4.jpg"/>
									</div>
									<div class="description">
										<h5 class="title purple">Sample class</h5>
										<div class="brief">
											Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.
										</div>
										<a class="btn small yellow disabled" href="#">
											<p>Get Started</p>
										</a>
									</div>
								</div>
								<div class="line">
									<div class="pic">
										<img src="img/pics/5.jpg"/>
									</div>
									<div class="description">
										<h5 class="title green">Sample class</h5>
										<div class="brief">
											Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.
										</div>
										<a class="btn small yellow disabled" href="#">
											<p>Get Started</p>
										</a>
									</div>
								</div>
								<div class="line">
									<div class="pic">
										<img src="img/pics/4.jpg"/>
									</div>
									<div class="description">
										<h5 class="title purple">Sample class</h5>
										<div class="brief">
											Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.
										</div>
										<a class="btn small yellow disabled" href="#">
											<p>Get Started</p>
										</a>
									</div>
								</div>
								<div class="line">
									<div class="pic">
										<img src="img/pics/5.jpg"/>
									</div>
									<div class="description">
										<h5 class="title green">Sample class</h5>
										<div class="brief">
											Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.
										</div>
										<a class="btn small yellow disabled" href="#">
											<p>Get Started</p>
										</a>
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>

	<script src="js/jquery-2.2.0.min.js" type="text/javascript"></script>
	<script src="js/main.js" type="text/javascript"></script>
</body>
<script>
var socket = io.connect();
window.addEventListener('load', function(){


	function add_course(course_title, course_description, parent_id, button_text) {
		$(parent_id).append('<div class="line"><div class="pic" id="currpic"><img src="img/pics/1.jpg"/></div><div class="description" id="currDisc"><h5 class="title blue">' + course_title + '</h5><div class="brief">' + course_description + '</div><a class="btn small yellow" href="#"><p>' + button_text + '</p></a></div></div>');
	};


	socket.emit('fillHistory', user, function(dataList){
		$.each(dataList, function(index, value){
			var courseId = value.course_id;
			var courseDesc = value.course_description;
			add_course(courseId, courseDesc, '#classHist', 'Do Again');
		});
	});


	socket.emit('fillFuture', user, function(dataList){
		$.each(dataList, function(index, value){
			var courseId = value.course_id;
			var courseDesc = value.course_description;
			add_course(courseId, courseDesc, '#futureClasses', 'Get Started');
		});
	});


	var user = meta('username');
	socket.emit('fillCurrent', user, function(dataList){
		$.each(dataList, function(index, value){
			var courseId = value.course_id;
			var courseDesc = value.coures_description;
			add_course(courseId, courseDesc, '#currPanel', 'Continue');
		});
	});


	socket.on('loggedIn', function(username) {
		//this needs to be rendered in html
		console.log(username);
	});

	// implement logout functionality on the client side
	$('#signout').click(function(e){
		$.post('/logout', {username: user});
		var url = window.location.href;
		url = url.replace('/login', '');
		url = url.replace('/createAccount', '');
		window.location.replace(url);
		console.log(url);
		e.preventDefault();
	});
}, false);

function meta(name) {
    var tag = document.querySelector('meta[name=' + name + ']');
    if (tag != null)
        return tag.content;
    return '';
};


</script>
</html>