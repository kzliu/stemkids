<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
	<!--meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1, maximum-scale=1"/-->
	<meta name="description" content=""/>
	<meta name="keywords" content=""/>
	<meta name="courseId" content="{{courseId}}">
	<meta name="courseTitle" content="{{courseTitle}}">
	<meta name="courseSummary" content="{{courseSummary}}">

	<title>Create Course {{courseId}}</title>

	<link href="/favicon.ico" rel="icon"/>
	<link href="apple-favicon.png" rel="apple-touch-icon"/>
	<link href="css/new_main.css" type="text/css" rel="stylesheet" media="all"/>
	<link href="css/createcourse.css" type="text/css" rel="stylesheet" media="all"/>
	<link href="css/semantic-ui/semantic.min.css" rel="stylesheet">
</head>
<body>
	<div class="main">
		<div class="wrapper">
			<h2> Add Lecture to Course {{courseId}}</h2>

			<form class="ui_form">
				<div class="field">
				    <label>Course Title</label>
				    <!-- <input type="text" name="course-title" placeholder="Title" hidden> -->
				    <p id="courseTitle">{{ courseTitle }}</p>
				    <!-- <a value="Edit" id="editTitle">Edit</a> -->
				</div>

				<div class="field">
				    <label>Course Summary</label>
				    <!-- <textarea rows="2" placeholder="Summary" id="courseSummaryEdit" hidden></textarea> -->
				    <p id="courseSummary">{{ courseSummary }}</p>
				    <!-- <button value="Edit" id="editCourseSummary">Edit</button> -->
				</div>

				<div class="uiDividingHeader"> </div>
				<div class="field">
				    <label>Lecture Title</label>
				    <input type="text" name="lectureTitle" id="lectureTitle" placeholder="Title">
				</div>

				<div class="url">
				    <label>Video Url</label>
					<div class="uiLabeledInput">
						<div class="ui label">
							http://
						</div>
						<input type="text" id="video" placeholder="mysite.com">
					</div>
				</div>

				</br>

				<div id="upload">
					<label id="def">Lecture Handout</label>
			    <label for="file" class="uiIconButton">
			        Upload File</label>
			    <input type="file" id="file">
				</div>
				<div class="quizlet">
					<h3>Question 1</h3>
					<div id="quiz">
						<div class="field">
						    <label> </label>
						    <input type="text" name="question" id="question" placeholder="Question">
						</div>

						<table class="uiTealTable">
							<tr class="centerAligned">
								<td>Answer</td>
								<td>Correct</td>
							</tr>
							<tr>
								<td>
								    <input type="text" name='answer1' id='answer1' placeholder="Answer 1">
								</td>
								<td class="center aligned">
									<div class="inline field">
									    <div class="ui checkbox">
									      <input type="checkbox" name='answer1cb' id='answer1corr'>
									      <label></label>
									    </div>
									  </div>
								</td>
							</tr>
							<tr>
								<td>
								    <input type="text" name='answer2' id='answer2' placeholder="Answer 2">
								</td>
								<td class="center aligned">
									<div class="inline field">
									    <div class="ui checkbox">
									      <input type="checkbox" name='answer2cb' id='answer2corr'>
									      <label></label>
									    </div>
									  </div>
								</td>
							</tr>
							<tr>
								<td>
								    <input type="text" name='answer3' id='answer3' placeholder="Answer 3">
								</td>
								<td class="center aligned">
									<div class="inline field">
									    <div class="ui checkbox">
									      <input type="checkbox" name='answer3cb' id='answer3corr'>
									      <label></label>
									    </div>
									  </div>
								</td>
							</tr>
							<tr>
								<td>
								    <input type="text" name='answer4' id='answer4' placeholder="Answer 4">
								</td>
								<td class="center aligned">
									<div class="inline field">
									    <div class="ui checkbox">
									      <input type="checkbox" name='answer4cb' id='answer4corr'>
									      <label></label>
									    </div>
									  </div>
								</td>
							</tr>
						</table>
					</div>
				</div>
				<div id="qstn">
					<button class="ui button">Add Question</button>
				</div>

				<div class="uiDividingHeader"> </div>

				<div id="sbmt">
					<button class="ui teal button" id="addNewLecture">Submit & Add New Lecture</button>
				</div>

				<div id="finish">
					<button class="ui orange button" type="submit">Upload Course</button>
				</div>
			</form>
		</div>
	</div>

<script type="text/javascript">
window.addEventListener('load', function(){
	var max_questions = 10; // maximum number of questions allowed
	var i = 1;
	var qzz = $('#quiz');
	var quiz_list = ['#quiz'];

	$('#qstn').click(function(e) {
		e.preventDefault();
		if (i < max_questions) {
			i++;
			$('.quizlet').append('<h3> Question ' + i + '</h3>');
			var id = '#quiz' + i;
			$('#quiz').clone().prop('id', 'quiz' + i).appendTo('.quizlet');
			quiz_list.push(id);
		};	
	});
	
	$('#addNewLecture').click(function(e){
		console.log("in submit");
		var lectureTitle = $('#lectureTitle').val();
		var video = $('#video').val();
		var length = quiz_list.length;
		var courseId = meta('courseId');
		var courseTitle = meta('courseTitle');
		var obj = {lectureTitle: lectureTitle, video: video, courseId: courseId, courseTitle: courseTitle, quizes: []};
		console.log(obj);
		console.log(quiz_list);
		for (var i = 0; i < length; i++) {
			var quiz = quiz_list[i];
			var question = $(quiz + ' > table.uiTealTable > #question').val();
			var answer1 = $(quiz + ' > table.uiTealTable > #answer1').val();
			var answer2 = $(quiz + ' > table.uiTealTable > #answer2').val();
			var answer3 = $(quiz + ' > table.uiTealTable > #answer3').val();
			var answer4 = $(quiz + ' > table.uiTealTable > #answer4').val();
// <<<<<<< HEAD
			if ($(quiz + ' > table.uiTealTable > #answer1corr').checked) {
				var corr1 = 1;
			} else {
				var corr1 = 0;
			}
			if ($(quiz + ' > table.uiTealTable > #answer2corr').checked) {
				var corr2 = 1;
			} else {
				var corr2 = 0;
			}
			if ($(quiz + ' > table.uiTealTable > #answer3corr').checked) {
				var corr3 = 1;
			} else {
				var corr3 = 0;
			}
			if ($(quiz + ' > table.uiTealTable > #answer4corr').checked) {
				var corr4 = 1;
			} else {
				var corr4 = 0;
			}
// =======
			// var corr1 = $(quiz + ' > table.uiTealTable > #answer1corr').prop('checked');
			// var corr2 = $(quiz + ' > table.uiTealTable > #answer2corr').prop('checked');
			// var corr3 = $(quiz + ' > table.uiTealTable > #answer3corr').prop('checked');
			// var corr4 = $(quiz + ' > table.uiTealTable > #answer4corr').prop('checked');
// >>>>>>> cb1a02cb6c6c203c5b1590ffb96e10d17fc87bb6
			var json = {quiz: {num: i, question: question, answer1: answer1, answer2: answer2, answer3: answer3, answer4: answer4, corr1: corr1, corr2: corr2, corr3: corr3, corr4: corr4}};
			console.log(json);
			obj.quizes.push(json);
		}
		console.log(obj);
		e.preventDefault();
		// $.post('/addClass', obj);
		// return false;
	});	
});

function meta(name) {
    var tag = document.querySelector('meta[name=' + name + ']');
    if (tag != null)
        return tag.content;
    return '';
};

</script>
<script src="css/semantic-ui/semantic.js" type="text/javascript"></script>
<script src="js/jquery-2.2.0.min.js" type="text/javascript"></script>
<script src="https://code.jquery.com/jquery-2.2.0.min.js" type="text/javascript"></script>
<script src="js/main.js" type="text/javascript"></script>
</body>
</html>